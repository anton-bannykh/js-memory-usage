"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function makeOutputPort(e){return new Port(void 0,e)}function makeInputPort(e){return new Port(e)}function check(e){return e instanceof Port}function checkInputPort(e){return check(e)&&e.isInputPort()}function checkOutputPort(e){return check(e)&&e.isOutputPort()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardOutputPort=void 0;var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2);exports.makeOutputPort=makeOutputPort,exports.makeInputPort=makeInputPort,exports.check=check,exports.checkInputPort=checkInputPort,exports.checkOutputPort=checkOutputPort;var _primitive=require("./primitive.js"),_lib=require("./lib.js"),$=_interopRequireWildcard(_lib),Port=function(e){function t(e,r){(0,_classCallCheck3.default)(this,t);var u=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this));return u.__state={buffer:[]},u.__read=e,u.__write=r,u}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"read",value:function(e){if(void 0===this.__read)throw $.racketCoreError("Not Implemented");return this.__read(this.__state,e)}},{key:"write",value:function(e){if(void 0===this.__write)throw $.racketCoreError("Not Implemented");return this.__write(this.__state,e)}},{key:"isOutputPort",value:function(){return this.__write&&!0}},{key:"isInputPort",value:function(){return this.__read&&!0}}]),t}(_primitive.Primitive),standardOutputPort=exports.standardOutputPort=makeOutputPort(function(e,t){var r=t.lastIndexOf("\n");if(r>=0){var u=e.buffer.join("")+t.slice(0,r),i=t.slice(r+1);e.buffer=[],""!==i&&e.buffer.push(i),console.log(u)}else e.buffer.push(t)});